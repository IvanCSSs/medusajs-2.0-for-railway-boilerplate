import{a as l}from"./chunk-MSDRGCRR-CygM1UmD.js";import{u as m,r as u,j as t,m as C,eH as v,C as T,H as y,q as k,L as S,B as w,k as P,a3 as A,A as _}from"./index-S35l5lon.js";import{c as f}from"./index-D8hIMFbh.js";import{e as D}from"./chunk-MFALVTRQ-BD7iJ2f3.js";import{b as E}from"./chunk-3C6WQ7NH-BXPy1B9w.js";import{S as H}from"./chunk-GIZFNLKK-DRFYVOmD.js";import{u as z,_ as L}from"./chunk-ULVVVKLF-DQ5i1kAh.js";import"./chunk-GU5PJRPM-CRBxyP7n.js";import{N}from"./NoctoSlot-Cmfmjduv.js";import{u as $}from"./use-prompt-D56I0Z60.js";import{P as I}from"./pencil-square-Y_YO1xMN.js";import{T as q}from"./trash-VeZKzNu3.js";import"./chunk-P3UUX2T6-CDvcsuG9.js";import"./chunk-C76H5USB-C4gmMgZH.js";import"./chunk-W7625H47--NTnJEnK.js";import"./index-DRUHz9yq.js";import"./check-B9bFzKnZ.js";import"./chunk-HQKGZADC-CFjwmGLF.js";import"./table-u7knMi01.js";import"./chunk-EMIHDNB7-1UnYIHIF.js";import"./plus-mini-B5zW_eay.js";import"./command-bar-D5PjKtE8.js";import"./index-BqPH3RWs.js";import"./chunk-DZWH2RV6-B7cI8-p8.js";import"./sub-Ca2BFeSf.js";import"./format-BsAuNKh5.js";import"./index-haGLTuDn.js";import"./date-picker-CzxuXAvc.js";import"./popover-9ZHd-JXE.js";import"./triangle-left-mini-CmFFwE40.js";import"./prompt-YaiseBxh.js";var n=f(),B=()=>{const{t:e}=m();return u.useMemo(()=>[n.accessor("title",{header:e("fields.title"),cell:({getValue:o})=>t.jsx(l,{text:o()})}),n.accessor("handle",{header:e("fields.handle"),cell:({getValue:o})=>t.jsx(l,{text:`/${o()}`})}),n.accessor("products",{header:e("fields.products"),cell:({getValue:o})=>{var i;const s=((i=o())==null?void 0:i.length)||void 0;return t.jsx(l,{text:s})}})],[e])},M=({collection:e})=>{const{t:o}=m(),s=$(),{mutateAsync:i}=A(e.id),a=async()=>{await s({title:o("general.areYouSure"),description:o("collections.deleteWarning",{title:e.title}),verificationText:e.title,verificationInstruction:o("general.typeToConfirm"),confirmText:o("actions.delete"),cancelText:o("actions.cancel")})&&await i()};return t.jsx(_,{groups:[{actions:[{label:o("actions.edit"),to:`/collections/${e.id}/edit`,icon:t.jsx(I,{})}]},{actions:[{label:o("actions.delete"),onClick:a,icon:t.jsx(q,{}),disabled:!e.id}]}]})},c=20,R=()=>{const{t:e}=m(),{searchParams:o,raw:s}=D({pageSize:c}),{collections:i,count:a,isError:d,error:x,isLoading:b}=v({...o,fields:"+products.id"},{placeholderData:P}),g=E(),p=F(),{table:h}=z({data:i??[],columns:p,count:a,enablePagination:!0,getRowId:(r,j)=>r.id??`${j}`,pageSize:c});if(d)throw x;return t.jsxs(T,{className:"divide-y p-0",children:[t.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[t.jsxs("div",{children:[t.jsx(y,{children:e("collections.domain")}),t.jsx(k,{className:"text-ui-fg-subtle",size:"small",children:e("collections.subtitle")})]}),t.jsx(S,{to:"/collections/create",children:t.jsx(w,{size:"small",variant:"secondary",children:e("actions.create")})})]}),t.jsx(L,{table:h,columns:p,pageSize:c,count:a,filters:g,orderBy:[{key:"title",label:e("fields.title")},{key:"handle",label:e("fields.handle")},{key:"created_at",label:e("fields.createdAt")},{key:"updated_at",label:e("fields.updatedAt")}],search:!0,navigateTo:r=>`/collections/${r.original.id}`,queryObject:s,isLoading:b})]})},W=f(),F=()=>{const e=B();return u.useMemo(()=>[...e,W.display({id:"actions",cell:({row:o})=>t.jsx(M,{collection:o.original})})],[e])},ve=()=>{const{getWidgets:e}=C();return t.jsx(H,{widgets:{after:e("product_collection.list.after"),before:e("product_collection.list.before")},children:t.jsx(N,{pluginId:"@collections",name:"main",fallback:t.jsx(R,{})})})};export{ve as Component};
