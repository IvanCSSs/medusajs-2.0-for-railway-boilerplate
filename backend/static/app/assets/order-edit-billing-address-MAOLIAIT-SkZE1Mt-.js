import{D as C}from"./chunk-C7F7MMXS-BXIPDtJe.js";import{C as I}from"./chunk-BW4QA6B6-D7Qkz6P4.js";import{u as F,a as L,dt as z,j as e,H as M,c as S,e as A,dX as B,t as y,F as s,I as t,B as _,o as O,s as i}from"./index-S35l5lon.js";import{K as w}from"./chunk-6HTZNHPT-USxWRfar.js";import{a as d,u as D}from"./chunk-AERWK3TJ-Gph8MRZF.js";import"./select-CmrtK7XQ.js";import"./check-B9bFzKnZ.js";import"./triangles-mini-CX2619vl.js";import"./focus-modal-B7NOABos.js";import"./prompt-YaiseBxh.js";var N=O({address_1:i().min(1),address_2:i().optional(),country_code:i().min(2).max(2),city:i().optional(),postal_code:i().optional(),province:i().optional(),company:i().optional(),phone:i().optional()});function T({order:n}){var x,j,p,u,h,g,f,b;const{t:l}=F(),{handleSuccess:a}=D(),o=S({defaultValues:{address_1:((x=n.billing_address)==null?void 0:x.address_1)||"",address_2:((j=n.billing_address)==null?void 0:j.address_2)||"",city:((p=n.billing_address)==null?void 0:p.city)||"",company:((u=n.billing_address)==null?void 0:u.company)||"",country_code:((h=n.billing_address)==null?void 0:h.country_code)||"",phone:((g=n.billing_address)==null?void 0:g.phone)||"",postal_code:((f=n.billing_address)==null?void 0:f.postal_code)||"",province:((b=n.billing_address)==null?void 0:b.province)||""},resolver:A(N)}),{mutateAsync:c,isPending:m}=B(n.id),E=o.handleSubmit(async r=>{try{await c({billing_address:r}),y.success(l("orders.edit.billingAddress.requestSuccess")),a()}catch(v){y.error(v.message)}});return e.jsx(d.Form,{form:o,children:e.jsxs(w,{onSubmit:E,className:"flex size-full flex-col overflow-hidden",children:[e.jsx(d.Body,{className:"flex-1 overflow-auto",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx(s.Field,{control:o.control,name:"address_1",render:({field:r})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{children:l("fields.address")}),e.jsx(s.Control,{children:e.jsx(t,{size:"small",...r})}),e.jsx(s.ErrorMessage,{})]})}),e.jsx(s.Field,{control:o.control,name:"address_2",render:({field:r})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{optional:!0,children:l("fields.address2")}),e.jsx(s.Control,{children:e.jsx(t,{size:"small",...r})}),e.jsx(s.ErrorMessage,{})]})}),e.jsx(s.Field,{control:o.control,name:"postal_code",render:({field:r})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{optional:!0,children:l("fields.postalCode")}),e.jsx(s.Control,{children:e.jsx(t,{size:"small",...r})}),e.jsx(s.ErrorMessage,{})]})}),e.jsx(s.Field,{control:o.control,name:"city",render:({field:r})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{optional:!0,children:l("fields.city")}),e.jsx(s.Control,{children:e.jsx(t,{size:"small",...r})}),e.jsx(s.ErrorMessage,{})]})}),e.jsx(s.Field,{control:o.control,name:"country_code",render:({field:r})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{children:l("fields.country")}),e.jsx(s.Control,{children:e.jsx(I,{...r,disabled:!0})}),e.jsx(s.ErrorMessage,{})]})}),e.jsx(s.Field,{control:o.control,name:"province",render:({field:r})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{optional:!0,children:l("fields.state")}),e.jsx(s.Control,{children:e.jsx(t,{size:"small",...r})}),e.jsx(s.ErrorMessage,{})]})}),e.jsx(s.Field,{control:o.control,name:"company",render:({field:r})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{optional:!0,children:l("fields.company")}),e.jsx(s.Control,{children:e.jsx(t,{size:"small",...r})}),e.jsx(s.ErrorMessage,{})]})}),e.jsx(s.Field,{control:o.control,name:"phone",render:({field:r})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{optional:!0,children:l("fields.phone")}),e.jsx(s.Control,{children:e.jsx(t,{size:"small",...r})}),e.jsx(s.ErrorMessage,{})]})})]})}),e.jsx(d.Footer,{children:e.jsxs("div",{className:"flex items-center justify-end gap-x-2",children:[e.jsx(d.Close,{asChild:!0,children:e.jsx(_,{variant:"secondary",size:"small",children:l("actions.cancel")})}),e.jsx(_,{isLoading:m,type:"submit",variant:"primary",size:"small",disabled:!!Object.keys(o.formState.errors||{}).length,children:l("actions.save")})]})})]})})}var G=()=>{const{t:n}=F(),l=L(),{order:a,isPending:o,isError:c,error:m}=z(l.id,{fields:C});if(!o&&c)throw m;return e.jsxs(d,{children:[e.jsx(d.Header,{children:e.jsx(M,{children:n("orders.edit.billingAddress.title")})}),a&&e.jsx(T,{order:a})]})};export{G as Component};
