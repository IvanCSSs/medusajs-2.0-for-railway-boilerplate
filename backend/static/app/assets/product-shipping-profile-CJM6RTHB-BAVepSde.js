import{P as j}from"./chunk-MAFEBZA7-ChMQGASp.js";import{u as _}from"./chunk-3TZOFKX2-M15LmCS4.js";import{C as P}from"./chunk-OFN7DIZA-C5u54b_Q.js";import{a as b,u as m,d2 as y,j as e,H as S,c as C,e as F,eb as v,t as u,r as E,F as n,B as h,o as T,O as V,s as w}from"./index-S35l5lon.js";import{K as D}from"./chunk-6HTZNHPT-USxWRfar.js";import{a as r,u as L}from"./chunk-AERWK3TJ-Gph8MRZF.js";import"./combobox-provider-CcO6EPfN.js";import"./triangles-mini-CX2619vl.js";import"./plus-mini-B5zW_eay.js";import"./focus-modal-B7NOABos.js";import"./prompt-YaiseBxh.js";var N=T({shipping_profile_id:w()}),R=({product:l})=>{var d;const{t:o}=m(),{handleSuccess:p}=L(),t=_({queryKey:["shipping_profiles"],queryFn:s=>V.admin.shippingProfile.list(s),getOptions:s=>s.shipping_profiles.map(a=>({label:a.name,value:a.id}))}),i=C({defaultValues:{shipping_profile_id:((d=l.shipping_profile)==null?void 0:d.id)??""},resolver:F(N)}),c=i.watch("shipping_profile_id"),{mutateAsync:f,isPending:x}=v(l.id),g=i.handleSubmit(async s=>{await f({shipping_profile_id:s.shipping_profile_id===""?null:s.shipping_profile_id},{onSuccess:({product:a})=>{u.success(o("products.shippingProfile.edit.toasts.success",{title:a.title})),p()},onError:a=>{u.error(a.message)}})});return E.useEffect(()=>{typeof c>"u"&&i.setValue("shipping_profile_id","")},[c]),e.jsx(r.Form,{form:i,children:e.jsxs(D,{onSubmit:g,className:"flex h-full flex-col",children:[e.jsx(r.Body,{children:e.jsx("div",{className:"flex h-full flex-col gap-y-4",children:e.jsx(n.Field,{control:i.control,name:"shipping_profile_id",render:({field:s})=>e.jsxs(n.Item,{children:[e.jsx(n.Label,{children:o("products.fields.shipping_profile.label")}),e.jsx(n.Control,{children:e.jsx(P,{...s,allowClear:!0,options:t.options,searchValue:t.searchValue,onSearchValueChange:t.onSearchValueChange,fetchNextPage:t.fetchNextPage})}),e.jsx(n.ErrorMessage,{})]})})})}),e.jsx(r.Footer,{children:e.jsxs("div",{className:"flex items-center justify-end gap-x-2",children:[e.jsx(r.Close,{asChild:!0,children:e.jsx(h,{size:"small",variant:"secondary",children:o("actions.cancel")})}),e.jsx(h,{size:"small",type:"submit",isLoading:x,children:o("actions.save")})]})})]})})},$=()=>{const{id:l}=b(),{t:o}=m(),{product:p,isLoading:t,isError:i,error:c}=y(l,{fields:j});if(i)throw c;return e.jsxs(r,{children:[e.jsx(r.Header,{children:e.jsx(r.Title,{asChild:!0,children:e.jsx(S,{children:o("products.shippingProfile.edit.header")})})}),!t&&p&&e.jsx(R,{product:p})]})};export{$ as Component};
