import{P as C}from"./chunk-KEQOAJC2-7WPNwWw4.js";import{S as _}from"./chunk-PRLQLEEQ-CKYDE1LK.js";import{c as F,a as S}from"./chunk-HI6URQ7H-C9eEBFjx.js";import{u as y,a as E,j as e,H as v,c as w,t as b,F as s,I as p,B as g,e as I,o as R,bk as N,s as f,n as L}from"./index-S35l5lon.js";import{K as P}from"./chunk-6HTZNHPT-USxWRfar.js";import{a as t,u as B}from"./chunk-AERWK3TJ-Gph8MRZF.js";import"./index.esm-BQ-YgayW.js";import"./focus-modal-B7NOABos.js";import"./prompt-YaiseBxh.js";var M=R({name:f().min(1),code:f().optional(),rate:R({float:L().optional(),value:f().optional()}),is_combinable:N().optional()}),H=({taxRate:n,isSublevel:c=!1})=>{var u;const{t:o}=y(),{handleSuccess:i}=B(),r=w({defaultValues:{name:n.name,code:n.code,rate:{value:((u=n.rate)==null?void 0:u.toString())||""},is_combinable:n.is_combinable},resolver:I(M)}),{mutateAsync:d,isPending:m}=S(n.id),x=r.handleSubmit(async a=>{var l;await d({name:a.name,code:a.code,rate:(l=a.rate)==null?void 0:l.float,is_combinable:a.is_combinable},{onSuccess:()=>{b.success(o("taxRegions.taxRates.edit.successToast")),i()},onError:j=>{b.error(j.message)}})});return e.jsx(t.Form,{form:r,children:e.jsxs(P,{className:"flex flex-1 flex-col overflow-hidden",onSubmit:x,children:[e.jsxs(t.Body,{className:"flex flex-1 flex-col gap-y-6 overflow-auto",children:[e.jsxs("div",{className:"flex flex-col gap-y-4",children:[e.jsx(s.Field,{control:r.control,name:"name",render:({field:a})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{children:o("fields.name")}),e.jsx(s.Control,{children:e.jsx(p,{...a})}),e.jsx(s.ErrorMessage,{})]})}),e.jsx(s.Field,{control:r.control,name:"code",render:({field:a})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{children:o("taxRegions.fields.taxCode")}),e.jsx(s.Control,{children:e.jsx(p,{...a})}),e.jsx(s.ErrorMessage,{})]})}),e.jsx(s.Field,{control:r.control,name:"rate",render:({field:{value:a,onChange:l,...j}})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{children:o("taxRegions.fields.taxRate")}),e.jsx(s.Control,{children:e.jsx(C,{...j,value:a==null?void 0:a.value,decimalsLimit:4,onValueChange:(T,k,h)=>l({value:T,float:h==null?void 0:h.float})})}),e.jsx(s.ErrorMessage,{})]})})]}),c&&e.jsx(_,{control:r.control,name:"is_combinable",label:o("taxRegions.fields.isCombinable.label"),description:o("taxRegions.fields.isCombinable.hint")})]}),e.jsx(t.Footer,{className:"shrink-0",children:e.jsxs("div",{className:"flex items-center justify-end gap-x-2",children:[e.jsx(t.Close,{asChild:!0,children:e.jsx(g,{size:"small",variant:"secondary",children:o("actions.cancel")})}),e.jsx(g,{size:"small",type:"submit",isLoading:m,children:o("actions.save")})]})})]})})},J=()=>{const{t:n}=y(),{province_id:c,tax_rate_id:o}=E(),{tax_rate:i,isPending:r,isError:d,error:m}=F(o),x=!r&&!!i;if(d)throw m;return e.jsxs(t,{children:[e.jsxs(t.Header,{children:[e.jsx(t.Title,{asChild:!0,children:e.jsx(v,{children:n("taxRegions.taxRates.edit.header")})}),e.jsx(t.Description,{className:"sr-only",children:n("taxRegions.taxRates.edit.hint")})]}),x&&e.jsx(H,{taxRate:i,isSublevel:!!c})]})};export{J as Component};
