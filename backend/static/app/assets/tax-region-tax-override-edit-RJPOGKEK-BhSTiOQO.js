import{T as R,D as c}from"./chunk-IFFVQD5Q-CYuRkI39.js";import"./chunk-FMPUXSXC-DpF6ipvW.js";import"./chunk-KEQOAJC2-7WPNwWw4.js";import{u as v,a as y,j as p,H as E,U as T,cC as P}from"./index-S35l5lon.js";import{c as b}from"./chunk-HI6URQ7H-C9eEBFjx.js";import{a as I}from"./chunk-ASIIOFVB-BHdj0c6d.js";import"./chunk-ULVVVKLF-DQ5i1kAh.js";import"./chunk-GU5PJRPM-CRBxyP7n.js";import"./chunk-6HTZNHPT-USxWRfar.js";import{a as l}from"./chunk-AERWK3TJ-Gph8MRZF.js";import"./chunk-PRLQLEEQ-CKYDE1LK.js";import"./select-CmrtK7XQ.js";import"./check-B9bFzKnZ.js";import"./triangles-mini-CX2619vl.js";import"./chunk-AABJNP6V-CY9S8G87.js";import"./chunk-C76H5USB-C4gmMgZH.js";import"./chunk-W7625H47--NTnJEnK.js";import"./chunk-ROKB75YP-BjHfL7E6.js";import"./chunk-P3UUX2T6-CDvcsuG9.js";import"./chunk-DZWH2RV6-B7cI8-p8.js";import"./sub-Ca2BFeSf.js";import"./format-BsAuNKh5.js";import"./chunk-MSDRGCRR-CygM1UmD.js";import"./index-D8hIMFbh.js";import"./chunk-UC26CCHZ-jn8Rx18I.js";import"./chunk-MFALVTRQ-BD7iJ2f3.js";import"./chunk-3C6WQ7NH-BXPy1B9w.js";import"./chunk-BW322BVH-Bu7mNcFf.js";import"./chunk-XLDQPLK4-BnBv0RH3.js";import"./chunk-ADOCJB6L-3RvuFqSE.js";import"./chunk-IQBAUTU5-BcF73Rgu.js";import"./chunk-CONJV275-BHlnUjoP.js";import"./checkbox-Bm9_gGRM.js";import"./index.esm-BQ-YgayW.js";import"./chunk-HQKGZADC-CFjwmGLF.js";import"./table-u7knMi01.js";import"./chunk-EMIHDNB7-1UnYIHIF.js";import"./plus-mini-B5zW_eay.js";import"./command-bar-D5PjKtE8.js";import"./index-BqPH3RWs.js";import"./index-haGLTuDn.js";import"./date-picker-CzxuXAvc.js";import"./popover-9ZHd-JXE.js";import"./triangle-left-mini-CmFFwE40.js";import"./focus-modal-B7NOABos.js";import"./prompt-YaiseBxh.js";var yi=()=>{const{t:r}=v(),{tax_rate_id:u}=y(),{tax_rate:e,isPending:n,isError:s,error:m}=b(u),{initialValues:d,isPending:i}=j(e),t=!n&&!!e&&!i&&!!d;if(s)throw m;return p.jsxs(l,{children:[p.jsxs(l.Header,{children:[p.jsx(l.Title,{asChild:!0,children:p.jsx(E,{children:r("taxRegions.taxOverrides.edit.header")})}),p.jsx(l.Description,{className:"sr-only",children:r("taxRegions.taxOverrides.edit.hint")})]}),t&&p.jsx(R,{taxRate:e,isCombinable:!0,initialValues:d})]})},j=r=>{const u=(r==null?void 0:r.rules)||[],e={product:[],product_type:[],shipping_option:[]};u.sort((i,t)=>i.created_at.localeCompare(t.created_at)).forEach(i=>{var o;const t=i.reference;(o=e[t])==null||o.push(i.reference_id)});const n=[{ids:e.product,hook:T,key:"product",getResult:i=>i.products.map(t=>({label:t.title,value:t.id}))},{ids:e.product_type,hook:P,key:"product_type",getResult:i=>i.product_types.map(t=>({label:t.value,value:t.id}))},{ids:e.shipping_option,hook:I,key:"shipping_option",getResult:i=>i.shipping_options.map(t=>({label:t.name,value:t.id}))}],s=n.map(({ids:i,hook:t})=>{const o=i.length>0;return{result:t({id:i.length>c?i.slice(0,c):i,limit:c},{enabled:o}),enabled:o}});if(!r)return{isPending:!0};const m=s.some(({result:i,enabled:t})=>t&&i.isPending);return m?{isPending:m}:(s.forEach(({result:i,enabled:t})=>{if(t&&i.isError)throw i.error}),{initialValues:n.reduce((i,{key:t,getResult:o},h)=>{let g=[];if(s[h].enabled){const _=o(s[h].result),x=new Map(_.map(a=>[a.value,a]));g=e[t].map(a=>{var f;return{value:a,label:((f=x.get(a))==null?void 0:f.label)||""}})}return{...i,[t]:g}},{}),isPending:!1})};export{yi as Component};
