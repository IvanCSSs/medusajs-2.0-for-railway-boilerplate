import{u as G}from"./chunk-2GWGNMAA-CfkRT-MD.js";import{D as T}from"./chunk-CM4CTG5D-ghcQfLC7.js";import{m as b,j as r,u as h,a7 as j,C as S,X as w,a8 as y,r as d,t as f,k as A}from"./index-S35l5lon.js";import{S as x}from"./chunk-GIZFNLKK-DRFYVOmD.js";import{u as L}from"./chunk-DZWH2RV6-B7cI8-p8.js";import{u as P}from"./chunk-C76H5USB-C4gmMgZH.js";import{u as E}from"./use-prompt-D56I0Z60.js";import{c as k}from"./create-data-table-column-helper-CslhiBa7.js";import{P as F}from"./pencil-square-Y_YO1xMN.js";import{T as I}from"./trash-VeZKzNu3.js";import"./create-data-table-filter-helper-BDq3TjGS.js";import"./sub-Ca2BFeSf.js";import"./format-BsAuNKh5.js";import"./use-data-table-C4h0AgWj.js";import"./command-bar-D5PjKtE8.js";import"./index-BqPH3RWs.js";import"./adjustments-D-7QP2vC.js";import"./checkbox-Bm9_gGRM.js";import"./select-CmrtK7XQ.js";import"./check-B9bFzKnZ.js";import"./triangles-mini-CX2619vl.js";import"./date-picker-CzxuXAvc.js";import"./popover-9ZHd-JXE.js";import"./triangle-left-mini-CmFFwE40.js";import"./table-u7knMi01.js";import"./arrow-up-mini-BZwwZ9E8.js";import"./index-D8hIMFbh.js";import"./sortable.esm-G2J7QBKc.js";import"./index-DRUHz9yq.js";import"./prompt-YaiseBxh.js";var g=10,N=()=>{const{t:e}=h(),{getWidgets:o}=b(),{q:n,order:u,offset:a,created_at:i,updated_at:t}=P(["q","order","offset","created_at","updated_at"]),s=q(),p=H(),{customer_groups:l,count:_,isPending:C,isError:D,error:v}=j({q:n,order:u,offset:a?parseInt(a):void 0,limit:g,created_at:i?JSON.parse(i):void 0,updated_at:t?JSON.parse(t):void 0,fields:"id,name,created_at,updated_at,customers.id"},{placeholderData:A});if(D)throw v;return r.jsx(x,{widgets:{before:o("customer_group.list.before"),after:o("customer_group.list.after")},children:r.jsx(S,{className:"overflow-hidden p-0",children:r.jsx(T,{data:l,columns:s,filters:p,heading:e("customerGroups.domain"),rowCount:_,getRowId:m=>m.id,rowHref:m=>`/customer-groups/${m.id}`,action:{label:e("actions.create"),to:"/customer-groups/create"},emptyState:{empty:{heading:e("customerGroups.list.empty.heading"),description:e("customerGroups.list.empty.description")},filtered:{heading:e("customerGroups.list.filtered.heading"),description:e("customerGroups.list.filtered.description")}},pageSize:g,isLoading:C})})})},c=k(),q=()=>{const{t:e}=h(),{getFullDate:o}=L(),n=w(),u=E(),{mutateAsync:a}=y(),i=d.useCallback(async({id:t,name:s})=>{await u({title:e("customerGroups.delete.title"),description:e("customerGroups.delete.description",{name:s}),verificationText:s,verificationInstruction:e("general.typeToConfirm"),confirmText:e("actions.delete"),cancelText:e("actions.cancel")})&&await a({id:t},{onSuccess:()=>{f.success(e("customerGroups.delete.successToast",{name:s}))},onError:l=>{f.error(l.message)}})},[e,u,a]);return d.useMemo(()=>[c.accessor("name",{header:e("fields.name"),enableSorting:!0,sortAscLabel:e("filters.sorting.alphabeticallyAsc"),sortDescLabel:e("filters.sorting.alphabeticallyDesc")}),c.accessor("customers",{header:e("customers.domain"),cell:({row:t})=>{var s;return r.jsx("span",{children:((s=t.original.customers)==null?void 0:s.length)??0})}}),c.accessor("created_at",{header:e("fields.createdAt"),cell:({row:t})=>r.jsx("span",{children:o({date:t.original.created_at,includeTime:!0})}),enableSorting:!0,sortAscLabel:e("filters.sorting.dateAsc"),sortDescLabel:e("filters.sorting.dateDesc")}),c.accessor("updated_at",{header:e("fields.updatedAt"),cell:({row:t})=>r.jsx("span",{children:o({date:t.original.updated_at,includeTime:!0})}),enableSorting:!0,sortAscLabel:e("filters.sorting.dateAsc"),sortDescLabel:e("filters.sorting.dateDesc")}),c.action({actions:[[{icon:r.jsx(F,{}),label:e("actions.edit"),onClick:t=>{n(`/customer-groups/${t.row.original.id}/edit`)}}],[{icon:r.jsx(I,{}),label:e("actions.delete"),onClick:t=>{i({id:t.row.original.id,name:t.row.original.name??""})}}]]})],[e,n,o,i])},H=()=>{const e=G();return d.useMemo(()=>e,[e])},ge=()=>{const{getWidgets:e}=b();return r.jsx(x,{widgets:{after:e("customer_group.list.after"),before:e("customer_group.list.before")},children:r.jsx(N,{})})};export{ge as Component};
