import{u as T}from"./chunk-AF7A24XI-u_bW59Eo.js";import{g as z,a as P,b as w}from"./chunk-54IEHX46-DWMq7yL7.js";import{S as x}from"./chunk-ADOCJB6L-3RvuFqSE.js";import{m as S,j as e,u as p,p as E,C as q,H,q as u,B as f,L as h,r as v,k as I,v as j,w as k,x as A,A as D}from"./index-S35l5lon.js";import{T as c,a as R}from"./chunk-MSDRGCRR-CygM1UmD.js";import{S as L}from"./chunk-GIZFNLKK-DRFYVOmD.js";import{u as M,_ as B}from"./chunk-ULVVVKLF-DQ5i1kAh.js";import"./chunk-GU5PJRPM-CRBxyP7n.js";import{u as O}from"./chunk-C76H5USB-C4gmMgZH.js";import{N as Q}from"./NoctoSlot-Cmfmjduv.js";import{P as $}from"./pencil-square-Y_YO1xMN.js";import{T as G}from"./trash-VeZKzNu3.js";import{c as b}from"./index-D8hIMFbh.js";import"./use-prompt-D56I0Z60.js";import"./prompt-YaiseBxh.js";import"./chunk-P3UUX2T6-CDvcsuG9.js";import"./index-DRUHz9yq.js";import"./check-B9bFzKnZ.js";import"./chunk-HQKGZADC-CFjwmGLF.js";import"./table-u7knMi01.js";import"./chunk-EMIHDNB7-1UnYIHIF.js";import"./plus-mini-B5zW_eay.js";import"./command-bar-D5PjKtE8.js";import"./index-BqPH3RWs.js";import"./chunk-DZWH2RV6-B7cI8-p8.js";import"./sub-Ca2BFeSf.js";import"./format-BsAuNKh5.js";import"./index-haGLTuDn.js";import"./date-picker-CzxuXAvc.js";import"./popover-9ZHd-JXE.js";import"./triangle-left-mini-CmFFwE40.js";var d=b(),W=()=>{const{t}=p();return v.useMemo(()=>[d.accessor("name",{header:()=>e.jsx(c,{text:t("fields.name")}),cell:({getValue:s,row:a})=>{const i=a.getToggleExpandedHandler();if(a.original.parent_category!==void 0){const r=z(a.original);return e.jsx("div",{className:"flex size-full items-center gap-1 overflow-hidden",children:r.map((o,l)=>e.jsxs("div",{className:j("overflow-hidden",{"text-ui-fg-muted flex items-center gap-x-1":l!==r.length-1}),children:[e.jsx(u,{size:"small",leading:"compact",className:"truncate",children:o.name}),l!==r.length-1&&e.jsx(u,{size:"small",leading:"compact",children:"/"})]},o.id))})}return e.jsxs("div",{className:"flex size-full items-center gap-x-3 overflow-hidden",children:[e.jsx("div",{className:"flex size-7 items-center justify-center",children:a.getCanExpand()?e.jsx(k,{type:"button",onClick:r=>{r.stopPropagation(),r.preventDefault(),i()},size:"small",variant:"transparent",className:"text-ui-fg-subtle",children:e.jsx(A,{className:j({"rotate-90 transition-transform will-change-transform":a.getIsExpanded()})})}):null}),e.jsx("span",{className:"truncate",children:s()})]})}}),d.accessor("handle",{header:()=>e.jsx(c,{text:t("fields.handle")}),cell:({getValue:s})=>e.jsx(R,{text:`/${s()}`})}),d.accessor("is_active",{header:()=>e.jsx(c,{text:t("fields.status")}),cell:({getValue:s})=>{const{color:a,label:i}=P(s(),t);return e.jsx(x,{color:a,children:i})}}),d.accessor("is_internal",{header:()=>e.jsx(c,{text:t("categories.fields.visibility.label")}),cell:({getValue:s})=>{const{color:a,label:i}=w(s(),t);return e.jsx(x,{color:a,children:i})}})],[t])},Z=({pageSize:t=20,prefix:s})=>{const a=O(["q","offset","order"],s),i={q:a.q,limit:t,offset:a.offset?Number(a.offset):0,order:a.order};return{raw:a,searchParams:i}},m=20,F=()=>{const{t}=p(),{raw:s,searchParams:a}=Z({pageSize:m}),i=s.q?{include_ancestors_tree:!0,fields:"id,name,handle,is_active,is_internal,parent_category",...a}:{include_descendants_tree:!0,parent_category_id:"null",fields:"id,name,category_children,handle,is_internal,is_active",...a},{product_categories:r,count:o,isLoading:l,isError:y,error:C}=E({...i},{placeholderData:I}),g=U(),{table:_}=M({data:r||[],columns:g,count:o,getRowId:n=>n.id,getSubRows:n=>n.category_children,enableExpandableRows:!0,pageSize:m}),N=!!r&&r.length>0;if(y)throw C;return e.jsxs(q,{className:"divide-y p-0",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[e.jsxs("div",{children:[e.jsx(H,{children:t("categories.domain")}),e.jsx(u,{className:"text-ui-fg-subtle",size:"small",children:t("categories.subtitle")})]}),e.jsxs("div",{className:"flex items-center gap-x-2",children:[N&&e.jsx(f,{size:"small",variant:"secondary",asChild:!0,children:e.jsx(h,{to:"organize",children:t("categories.organize.action")})}),e.jsx(f,{size:"small",variant:"secondary",asChild:!0,children:e.jsx(h,{to:"create",children:t("actions.create")})})]})]}),e.jsx(B,{table:_,columns:g,count:o,pageSize:m,isLoading:l,navigateTo:n=>n.id,queryObject:s,search:!0,pagination:!0})]})},J=({category:t})=>{const{t:s}=p(),a=T(t);return e.jsx(D,{groups:[{actions:[{label:s("actions.edit"),icon:e.jsx($,{}),to:`${t.id}/edit`}]},{actions:[{label:s("actions.delete"),icon:e.jsx(G,{}),onClick:a}]}]})},K=b(),U=()=>{const t=W();return v.useMemo(()=>[...t,K.display({id:"actions",cell:({row:s})=>e.jsx(J,{category:s.original})})],[t])},we=()=>{const{getWidgets:t}=S();return e.jsx(L,{widgets:{after:t("product_category.list.after"),before:t("product_category.list.before")},hasOutlet:!0,children:e.jsx(Q,{pluginId:"@categories",name:"main",fallback:e.jsx(F,{})})})};export{we as Component};
