import{D as C}from"./chunk-C7F7MMXS-BXIPDtJe.js";import{C as I}from"./chunk-BW4QA6B6-D7Qkz6P4.js";import{u as F,a as L,dt as S,j as s,H as z,c as M,e as A,dX as w,t as y,F as e,I as t,B as _,o as O,s as d}from"./index-S35l5lon.js";import{K as D}from"./chunk-6HTZNHPT-USxWRfar.js";import{a as l,u as N}from"./chunk-AERWK3TJ-Gph8MRZF.js";import"./select-CmrtK7XQ.js";import"./check-B9bFzKnZ.js";import"./triangles-mini-CX2619vl.js";import"./focus-modal-B7NOABos.js";import"./prompt-YaiseBxh.js";var T=O({address_1:d().min(1),address_2:d().optional(),country_code:d().min(2).max(2),city:d().optional(),postal_code:d().optional(),province:d().optional(),company:d().optional(),phone:d().optional()});function B({order:i}){var p,x,m,j,h,u,g,f;const{t:n}=F(),{handleSuccess:a}=N(),o=M({defaultValues:{address_1:((p=i.shipping_address)==null?void 0:p.address_1)||"",address_2:((x=i.shipping_address)==null?void 0:x.address_2)||"",city:((m=i.shipping_address)==null?void 0:m.city)||"",company:((j=i.shipping_address)==null?void 0:j.company)||"",country_code:((h=i.shipping_address)==null?void 0:h.country_code)||"",phone:((u=i.shipping_address)==null?void 0:u.phone)||"",postal_code:((g=i.shipping_address)==null?void 0:g.postal_code)||"",province:((f=i.shipping_address)==null?void 0:f.province)||""},resolver:A(T)}),{mutateAsync:c,isPending:E}=w(i.id),b=o.handleSubmit(async r=>{try{await c({shipping_address:r}),y.success(n("orders.edit.shippingAddress.requestSuccess")),a()}catch(v){y.error(v.message)}});return s.jsx(l.Form,{form:o,children:s.jsxs(D,{onSubmit:b,className:"flex size-full flex-col overflow-hidden",children:[s.jsx(l.Body,{className:"flex-1 overflow-auto",children:s.jsxs("div",{className:"flex flex-col gap-4",children:[s.jsx(e.Field,{control:o.control,name:"address_1",render:({field:r})=>s.jsxs(e.Item,{children:[s.jsx(e.Label,{children:n("fields.address")}),s.jsx(e.Control,{children:s.jsx(t,{size:"small",...r})}),s.jsx(e.ErrorMessage,{})]})}),s.jsx(e.Field,{control:o.control,name:"address_2",render:({field:r})=>s.jsxs(e.Item,{children:[s.jsx(e.Label,{optional:!0,children:n("fields.address2")}),s.jsx(e.Control,{children:s.jsx(t,{size:"small",...r})}),s.jsx(e.ErrorMessage,{})]})}),s.jsx(e.Field,{control:o.control,name:"postal_code",render:({field:r})=>s.jsxs(e.Item,{children:[s.jsx(e.Label,{optional:!0,children:n("fields.postalCode")}),s.jsx(e.Control,{children:s.jsx(t,{size:"small",...r})}),s.jsx(e.ErrorMessage,{})]})}),s.jsx(e.Field,{control:o.control,name:"city",render:({field:r})=>s.jsxs(e.Item,{children:[s.jsx(e.Label,{optional:!0,children:n("fields.city")}),s.jsx(e.Control,{children:s.jsx(t,{size:"small",...r})}),s.jsx(e.ErrorMessage,{})]})}),s.jsx(e.Field,{control:o.control,name:"country_code",render:({field:r})=>s.jsxs(e.Item,{children:[s.jsx(e.Label,{children:n("fields.country")}),s.jsx(e.Control,{children:s.jsx(I,{...r,disabled:!0})}),s.jsx(e.ErrorMessage,{})]})}),s.jsx(e.Field,{control:o.control,name:"province",render:({field:r})=>s.jsxs(e.Item,{children:[s.jsx(e.Label,{optional:!0,children:n("fields.state")}),s.jsx(e.Control,{children:s.jsx(t,{size:"small",...r})}),s.jsx(e.ErrorMessage,{})]})}),s.jsx(e.Field,{control:o.control,name:"company",render:({field:r})=>s.jsxs(e.Item,{children:[s.jsx(e.Label,{optional:!0,children:n("fields.company")}),s.jsx(e.Control,{children:s.jsx(t,{size:"small",...r})}),s.jsx(e.ErrorMessage,{})]})}),s.jsx(e.Field,{control:o.control,name:"phone",render:({field:r})=>s.jsxs(e.Item,{children:[s.jsx(e.Label,{optional:!0,children:n("fields.phone")}),s.jsx(e.Control,{children:s.jsx(t,{size:"small",...r})}),s.jsx(e.ErrorMessage,{})]})})]})}),s.jsx(l.Footer,{children:s.jsxs("div",{className:"flex items-center justify-end gap-x-2",children:[s.jsx(l.Close,{asChild:!0,children:s.jsx(_,{variant:"secondary",size:"small",children:n("actions.cancel")})}),s.jsx(_,{isLoading:E,type:"submit",variant:"primary",size:"small",children:n("actions.save")})]})})]})})}var G=()=>{const{t:i}=F(),n=L(),{order:a,isPending:o,isError:c}=S(n.id,{fields:C});if(!o&&c)throw new Error("Order not found");return s.jsxs(l,{children:[s.jsx(l.Header,{children:s.jsx(z,{children:i("orders.edit.shippingAddress.title")})}),a&&s.jsx(B,{order:a})]})};export{G as Component};
