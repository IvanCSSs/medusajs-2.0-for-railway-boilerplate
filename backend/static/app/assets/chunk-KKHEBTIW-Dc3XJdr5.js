import{C as w}from"./chunk-X5VECN6S-C49qKVnn.js";import{G as F}from"./chunk-PYIO3TDQ-D8Zv8hXV.js";import{u as H,a as B,b as V}from"./chunk-NOAFLTPV-oIicrk9h.js";import{u as P,bh as q,j as e,F as d,B as C,r as h,bH as K,o as I,l as Q,s as E}from"./index-S35l5lon.js";import{u as X,_ as J}from"./chunk-ULVVVKLF-DQ5i1kAh.js";import{S as i,b as U}from"./chunk-AERWK3TJ-Gph8MRZF.js";import{c as W}from"./index-D8hIMFbh.js";import{C as N}from"./checkbox-Bm9_gGRM.js";I({countries:Q(I({iso_2:E().min(2),display_name:E()}))});var Y=({form:a})=>{const t=a,{t:s}=P(),{fields:n,remove:x,replace:y}=q({control:t.control,name:"countries",keyName:"iso_2"}),f=()=>{y([])};return Z(a),e.jsx(d.Field,{control:a.control,name:"countries",render:()=>e.jsxs(d.Item,{children:[e.jsxs("div",{className:"flex items-center justify-between gap-x-4",children:[e.jsxs("div",{children:[e.jsx(d.Label,{children:s("stockLocations.serviceZones.manageAreas.label")}),e.jsx(d.Hint,{children:s("stockLocations.serviceZones.manageAreas.hint")})]}),e.jsx(i.Trigger,{asChild:!0,children:e.jsx(C,{size:"small",variant:"secondary",type:"button",children:s("stockLocations.serviceZones.manageAreas.action")})})]}),e.jsx(d.ErrorMessage,{}),e.jsx(d.Control,{className:"mt-0",children:n.length>0&&e.jsx(w,{onClearAll:f,onRemove:x,className:"py-4",children:n.map((u,m)=>e.jsx(w.Chip,{index:m,children:u.display_name},u.iso_2))})})]})})},j="ac",_=50,$=({form:a})=>{const t=a,{t:s}=P(),{getValues:n,setValue:x}=t,{setIsOpen:y,getIsOpen:f}=U(),u=f(F),[m,v]=h.useState({}),[D,b]=h.useState([]),{searchParams:G,raw:O}=H({pageSize:_,prefix:j}),{countries:p,count:S}=B({countries:K.map(o=>({display_name:o.display_name,name:o.name,iso_2:o.iso_2,iso_3:o.iso_3,num_code:o.num_code})),...G});h.useEffect(()=>{if(!u)return;const o=n("countries");o&&(b(o.map(r=>({iso_2:r.iso_2,display_name:r.display_name}))),v(o.reduce((r,g)=>({...r,[g.iso_2]:!0}),{})))},[u,n]);const R=o=>{const r=typeof o=="function"?o(m):o,g=Object.keys(r),A=new Set(g.filter(l=>r[l]&&!m[l])),T=[];if(A.size>0){const l=(p==null?void 0:p.filter(c=>A.has(c.iso_2)))??[];for(const c of l)T.push({iso_2:c.iso_2,display_name:c.display_name})}b(l=>{const c=l.filter(M=>r[M.iso_2]);return Array.from(new Set([...c,...T]))}),v(r)},z=()=>{x("countries",D,{shouldDirty:!0,shouldTouch:!0}),y(F,!1)},k=se(),{table:L}=X({data:p||[],columns:k,count:S,enablePagination:!0,enableRowSelection:!0,getRowId:o=>o.iso_2,pageSize:_,rowSelection:{state:m,updater:R},prefix:j});return Z(a),e.jsxs(i.Content,{className:"flex flex-col overflow-hidden",children:[e.jsxs(i.Header,{children:[e.jsx(i.Title,{asChild:!0,children:e.jsx("span",{className:"sr-only",children:s("stockLocations.serviceZones.manageAreas.label")})}),e.jsx(i.Description,{asChild:!0,children:e.jsx("span",{className:"sr-only",children:s("stockLocations.serviceZones.manageAreas.hint")})})]}),e.jsx(i.Body,{className:"flex-1 overflow-hidden",children:e.jsx(J,{table:L,columns:k,pageSize:_,count:S,search:!0,pagination:!0,layout:"fill",orderBy:[{key:"display_name",label:s("fields.name")},{key:"iso_2",label:s("fields.code")}],queryObject:O,prefix:j})}),e.jsx(i.Footer,{children:e.jsxs("div",{className:"flex items-center justify-end gap-x-2",children:[e.jsx(i.Close,{type:"button",asChild:!0,children:e.jsx(C,{variant:"secondary",size:"small",children:s("actions.cancel")})}),e.jsx(C,{size:"small",type:"button",onClick:z,children:s("actions.save")})]})})]})},ee=W(),se=()=>{const a=V();return h.useMemo(()=>[ee.display({id:"select",header:({table:t})=>e.jsx(N,{checked:t.getIsSomePageRowsSelected()?"indeterminate":t.getIsAllPageRowsSelected(),onCheckedChange:s=>t.toggleAllPageRowsSelected(!!s)}),cell:({row:t})=>{const s=!t.getCanSelect();return e.jsx(N,{checked:t.getIsSelected()||s,disabled:s,onCheckedChange:n=>t.toggleSelected(!!n),onClick:n=>{n.stopPropagation()}})}}),...a],[a])};function Z(a){if(a.getValues("countries")===void 0)throw new Error("The form does not have a field named 'countries'. This field is required to use the GeoZoneForm component.")}var de=Object.assign(Y,{AreaDrawer:$});export{de as G};
