import{u as G,a as Q,b as Z}from"./chunk-AABJNP6V-CY9S8G87.js";import{g as J}from"./chunk-UC26CCHZ-jn8Rx18I.js";import{b as K}from"./chunk-MFALVTRQ-BD7iJ2f3.js";import{a as V}from"./chunk-3C6WQ7NH-BXPy1B9w.js";import{u as W}from"./chunk-BW322BVH-Bu7mNcFf.js";import{u as $,a as ee}from"./chunk-CONJV275-BHlnUjoP.js";import{D as te}from"./chunk-ROKB75YP-BjHfL7E6.js";import{u as z,r as m,j as a,B as L,d2 as se,q as ae,w as re,am as oe,k as B,bv as ne,cC as le,U as ie,y as ce,o as X,s as U,l as de,cq as ue}from"./index-S35l5lon.js";import{a as pe}from"./chunk-ASIIOFVB-BHdj0c6d.js";import{a as j}from"./chunk-MSDRGCRR-CygM1UmD.js";import{u as H,_ as M}from"./chunk-ULVVVKLF-DQ5i1kAh.js";import{S as me,c as fe}from"./chunk-AERWK3TJ-Gph8MRZF.js";import{c as N}from"./index-D8hIMFbh.js";import{C as w}from"./checkbox-Bm9_gGRM.js";var Y=(s=>(s.PRODUCT="product",s.PRODUCT_TYPE="product_type",s.SHIPPING_OPTION="shipping_option",s))(Y||{}),x=N(),ge=()=>{const{t:s}=z();return m.useMemo(()=>[x.accessor("name",{header:()=>s("fields.name"),cell:({getValue:e})=>a.jsx(j,{text:e()})}),x.accessor("shipping_profile",{header:()=>s("fields.shippingProfile"),cell:({row:e})=>{var t;return a.jsx(j,{text:((t=e.original.shipping_profile)==null?void 0:t.name)||"N/A"})}}),x.display({id:"location",header:()=>s("fields.location"),cell:({row:e})=>{const t=J(e.original);return a.jsx(j,{text:t})}}),x.display({id:"service_zone",header:()=>s("fields.serviceZone"),cell:({row:e})=>{var r;const t=(r=e.original.service_zone)==null?void 0:r.name;return a.jsx(j,{text:t||"N/A"})}}),x.display({id:"enabled_in_store",header:()=>s("fields.enabledInStore"),cell:({row:e})=>{var o;let t="N/A";const r=(o=e.original.rules)==null?void 0:o.find(i=>i.attribute==="enabled_in_store");return r&&(t=r.value==="true"?"Yes":"No"),a.jsx(j,{text:t})}}),x.display({id:"is_return",header:()=>s("fields.isReturn"),cell:({row:e})=>{var o;let t="N/A";const r=(o=e.original.rules)==null?void 0:o.find(i=>i.attribute==="is_return");return r&&(t=r.value==="true"?"Yes":"No"),a.jsx(j,{text:t})}}),x.accessor("created_at",{header:()=>s("fields.createdAt"),cell:({getValue:e})=>a.jsx(te,{date:e()})})],[s])};function he(s){return s.reduce((e,t)=>(e[t.value]=!0,e),{})}var Le=({referenceType:s,type:e,setState:t,state:r})=>{const{t:o}=z(),i=e==="focus"?me:fe,[f,b]=m.useState(r),l=()=>{t(f)};return a.jsxs("div",{className:"flex size-full flex-col overflow-hidden",children:[a.jsx(i.Body,{className:"min-h-0 p-0",children:a.jsx(Se,{referenceType:s,initialRowState:he(r),intermediate:f,setIntermediate:b})}),a.jsxs(i.Footer,{children:[a.jsx(i.Close,{asChild:!0,children:a.jsx(L,{variant:"secondary",size:"small",type:"button",children:o("actions.cancel")})}),a.jsx(L,{type:"button",size:"small",onClick:l,children:o("actions.save")})]})]})},Se=({referenceType:s,...e})=>{switch(s){case"product":return a.jsx(be,{...e});case"product_type":return a.jsx(Pe,{...e});case"shipping_option":return a.jsx(we,{...e});default:return null}},p=50,E="p",be=({initialRowState:s,intermediate:e,setIntermediate:t})=>{const{t:r}=z(),[o,i]=m.useState(s);q();const{searchParams:f,raw:b}=$({pageSize:p,prefix:E}),{products:l,count:g,isLoading:k,isError:C,error:I}=ie(f,{placeholderData:B}),T=c=>{const d=typeof c=="function"?c(o):c,h=Object.keys(o),S=Object.keys(d),v=S.filter(n=>!h.includes(n)),R=h.filter(n=>!S.includes(n)),O=(l==null?void 0:l.filter(n=>v.includes(n.id)).map(n=>({value:n.id,label:n.title})))||[],A=e.filter(n=>!R.includes(n.value));t([...A,...O]),i(d)},_=ee(),y=xe(),{table:P}=H({data:l||[],columns:y,count:g,enablePagination:!0,enableRowSelection:!0,getRowId:c=>c.id,rowSelection:{state:o,updater:T},pageSize:p,prefix:E});if(C)throw I;return a.jsx(M,{table:P,columns:y,pageSize:p,count:g,isLoading:k,filters:_,orderBy:[{key:"title",label:r("fields.title")},{key:"created_at",label:r("fields.createdAt")},{key:"updated_at",label:r("fields.updatedAt")}],layout:"fill",pagination:!0,search:!0,prefix:E,queryObject:b})},ye=N(),xe=()=>{const s=W();return m.useMemo(()=>[ye.display({id:"select",header:({table:e})=>a.jsx(w,{checked:e.getIsSomePageRowsSelected()?"indeterminate":e.getIsAllPageRowsSelected(),onCheckedChange:t=>e.toggleAllPageRowsSelected(!!t)}),cell:({row:e})=>a.jsx(w,{checked:e.getIsSelected(),onCheckedChange:t=>e.toggleSelected(!!t),onClick:t=>{t.stopPropagation()}})}),...s],[s])},D="pt",Pe=({initialRowState:s,intermediate:e,setIntermediate:t})=>{const{t:r}=z(),[o,i]=m.useState(s);q();const{searchParams:f,raw:b}=G({pageSize:p,prefix:D}),{product_types:l,count:g,isLoading:k,isError:C,error:I}=le(f,{placeholderData:B}),T=c=>{const d=typeof c=="function"?c(o):c,h=Object.keys(o),S=Object.keys(d),v=S.filter(n=>!h.includes(n)),R=h.filter(n=>!S.includes(n)),O=(l==null?void 0:l.filter(n=>v.includes(n.id)).map(n=>({value:n.id,label:n.value})))||[],A=e.filter(n=>!R.includes(n.value));t([...A,...O]),i(d)},_=Q(),y=je(),{table:P}=H({data:l||[],columns:y,count:g,enablePagination:!0,enableRowSelection:!0,getRowId:c=>c.id,rowSelection:{state:o,updater:T},pageSize:p,prefix:D});if(C)throw I;return a.jsx(M,{table:P,columns:y,pageSize:p,count:g,isLoading:k,filters:_,orderBy:[{key:"value",label:r("fields.value")},{key:"created_at",label:r("fields.createdAt")},{key:"updated_at",label:r("fields.updatedAt")}],layout:"fill",pagination:!0,search:!0,prefix:D,queryObject:b})},ve=N(),je=()=>{const s=Z();return m.useMemo(()=>[ve.display({id:"select",header:({table:e})=>a.jsx(w,{checked:e.getIsSomePageRowsSelected()?"indeterminate":e.getIsAllPageRowsSelected(),onCheckedChange:t=>e.toggleAllPageRowsSelected(!!t)}),cell:({row:e})=>a.jsx(w,{checked:e.getIsSelected(),onCheckedChange:t=>e.toggleSelected(!!t),onClick:t=>{t.stopPropagation()}})}),...s],[s])},F="so",we=({initialRowState:s,intermediate:e,setIntermediate:t})=>{const{t:r}=z(),[o,i]=m.useState(s);q();const{searchParams:f,raw:b}=K({pageSize:p,prefix:F}),{shipping_options:l,count:g,isLoading:k,isError:C,error:I}=pe({...f,fields:"+service_zone.fulfillment_set.location.*"},{placeholderData:B}),T=d=>{const h=typeof d=="function"?d(o):d,S=Object.keys(o),v=Object.keys(h),R=v.filter(u=>!S.includes(u)),O=S.filter(u=>!v.includes(u)),A=(l==null?void 0:l.filter(u=>R.includes(u.id)).map(u=>({value:u.id,label:u.name})))||[],n=e.filter(u=>!O.includes(u.value));t([...n,...A]),i(h)},{stock_locations:_}=ne({limit:1e3}),y=V(_||[]),P=Ce(),{table:c}=H({data:l||[],columns:P,count:g,enablePagination:!0,enableRowSelection:!0,getRowId:d=>d.id,rowSelection:{state:o,updater:T},pageSize:p,prefix:F});if(C)throw I;return a.jsx(M,{table:c,columns:P,pageSize:p,count:g,isLoading:k,filters:y,orderBy:[{key:"name",label:r("fields.name")},{key:"created_at",label:r("fields.createdAt")},{key:"updated_at",label:r("fields.updatedAt")}],layout:"fill",pagination:!0,search:!0,prefix:F,queryObject:b})},ke=N(),Ce=()=>{const s=ge();return m.useMemo(()=>[ke.display({id:"select",header:({table:e})=>a.jsx(w,{checked:e.getIsSomePageRowsSelected()?"indeterminate":e.getIsAllPageRowsSelected(),onCheckedChange:t=>e.toggleAllPageRowsSelected(!!t)}),cell:({row:e})=>a.jsx(w,{checked:e.getIsSelected(),onCheckedChange:t=>e.toggleSelected(!!t),onClick:t=>{t.stopPropagation()}})}),...s],[s])},q=()=>{const[s,e]=ce();m.useEffect(()=>()=>{e({})},[])},Ue=({index:s,label:e,onRemove:t,value:r})=>{const{product:o}=se(r,{fields:"id,title"},{enabled:!e});return a.jsxs("div",{className:"bg-ui-bg-field-component shadow-borders-base flex items-center justify-between gap-2 rounded-md px-2 py-0.5",children:[a.jsx(ae,{size:"small",leading:"compact",children:e||(o==null?void 0:o.title)}),a.jsx(re,{size:"small",variant:"transparent",type:"button",onClick:()=>t(s),children:a.jsx(oe,{})})]})},Ie=X({value:U(),label:U()});X({reference_type:ue(Y),references:de(Ie)});var Xe=s=>s.references.map(e=>({reference:s.reference_type,reference_id:e.value}));export{Y as T,Le as a,Ue as b,Xe as c,Ie as d};
