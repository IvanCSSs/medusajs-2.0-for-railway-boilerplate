import{S as h,a as S}from"./chunk-HWKLNKOY-Cn0Svd_K.js";import{g as v}from"./chunk-B6ZOPCPA-Bu8977YU.js";import{L as _}from"./chunk-I3VB6NM2-Hzl3E4H-.js";import{D as T}from"./chunk-CM4CTG5D-ghcQfLC7.js";import{u as f,bv as P,m as C,j as s,C as j,X as w,r as E,k as N,H as D,O as K,M as g,c4 as x,t as b}from"./index-S35l5lon.js";import{T as m}from"./chunk-GIZFNLKK-DRFYVOmD.js";import{P as u}from"./chunk-P3UUX2T6-CDvcsuG9.js";import{u as M}from"./chunk-C76H5USB-C4gmMgZH.js";import{u as O}from"./use-prompt-D56I0Z60.js";import{P as R}from"./pencil-square-Y_YO1xMN.js";import{T as q}from"./trash-VeZKzNu3.js";import{T as H}from"./truck-fast-CqwXfpFh.js";import{c as I}from"./create-data-table-column-helper-CslhiBa7.js";import{S as k}from"./status-badge-CXGqPLdn.js";import"./use-data-table-C4h0AgWj.js";import"./command-bar-D5PjKtE8.js";import"./index-BqPH3RWs.js";import"./adjustments-D-7QP2vC.js";import"./checkbox-Bm9_gGRM.js";import"./select-CmrtK7XQ.js";import"./check-B9bFzKnZ.js";import"./triangles-mini-CX2619vl.js";import"./date-picker-CzxuXAvc.js";import"./popover-9ZHd-JXE.js";import"./triangle-left-mini-CmFFwE40.js";import"./table-u7knMi01.js";import"./arrow-up-mini-BZwwZ9E8.js";import"./index-D8hIMFbh.js";import"./sortable.esm-G2J7QBKc.js";import"./index-DRUHz9yq.js";import"./prompt-YaiseBxh.js";var z="name,*sales_channels,*address,*fulfillment_sets,*fulfillment_sets.service_zones,*fulfillment_sets.service_zones.shipping_options,*fulfillment_sets.service_zones.shipping_options.shipping_profile",c=I(),F=()=>{const{t:e}=f(),l=w(),p=O(),n=async i=>{if(await p({title:e("general.areYouSure"),description:e("stockLocations.delete.confirmation",{name:i.name}),confirmText:e("actions.remove"),cancelText:e("actions.cancel")}))try{await K.admin.stockLocation.delete(i.id),g.invalidateQueries({queryKey:x.lists()}),g.invalidateQueries({queryKey:x.detail(i.id)}),b.success(e("stockLocations.delete.successToast",{name:i.name}))}catch(o){b.error(o.message)}};return E.useMemo(()=>[c.accessor("name",{header:e("fields.name"),cell:({getValue:i})=>{const t=i();return t?s.jsx("span",{className:"text-ui-fg-subtle text-small truncate",children:t}):s.jsx(u,{})}}),c.accessor("address",{header:e("fields.address"),cell:({getValue:i,row:t})=>{const o=i(),a=t.original;return o?s.jsx("div",{className:"flex flex-col",children:s.jsx("span",{className:"text-ui-fg-subtle text-small truncate",children:v({address:a.address}).join(", ")})}):s.jsx(u,{})}}),c.accessor("fulfillment_sets",{id:"shipping_fulfillment",header:e("stockLocations.fulfillmentSets.shipping.header"),cell:({getValue:i})=>{const t=i(),a=!!(t==null?void 0:t.find(r=>r.type==="shipping"));return s.jsx(k,{color:a?"green":"grey",children:e(a?"statuses.enabled":"statuses.disabled")})}}),c.accessor("fulfillment_sets",{id:"pickup_fulfillment",header:e("stockLocations.fulfillmentSets.pickup.header"),cell:({getValue:i})=>{const t=i(),a=!!(t==null?void 0:t.find(r=>r.type==="pickup"));return s.jsx(k,{color:a?"green":"grey",children:e(a?"statuses.enabled":"statuses.disabled")})}}),c.accessor("sales_channels",{header:e("stockLocations.salesChannels.label"),cell:({getValue:i})=>{const t=i();return t!=null&&t.length?s.jsx("div",{className:"flex items-center",children:s.jsx(_,{inline:!0,n:1,list:t.map(o=>o.name)})}):s.jsx(u,{})}}),c.action({actions:i=>{const t=i.row.original;return[[{icon:s.jsx(R,{}),label:e("actions.edit"),onClick:()=>{l(`/settings/locations/${t.id}/edit`)}}],[{icon:s.jsx(q,{}),label:e("actions.delete"),onClick:()=>n(t)}]]}})],[])},Q=({pageSize:e=20,prefix:l})=>{const p=M(["order","offset","q"],l),{offset:n,...i}=p;return{limit:e,offset:n?Number(n):0,...i}},L=20,y="loc";function ye(){const{t:e}=f(),l=Q({pageSize:L,prefix:y}),{stock_locations:p=[],count:n,isError:i,error:t,isLoading:o}=P({fields:z,...l},{placeholderData:N}),a=F(),{getWidgets:r}=C();if(i)throw t;return s.jsxs(m,{widgets:{after:r("location.list.after"),before:r("location.list.before"),sideAfter:r("location.list.side.after"),sideBefore:r("location.list.side.before")},showJSON:!0,children:[s.jsx(m.Main,{children:s.jsx(j,{className:"flex flex-col divide-y p-0",children:s.jsx(T,{data:p,columns:a,rowCount:n,pageSize:L,getRowId:d=>d.id,heading:e("stockLocations.domain"),subHeading:e("stockLocations.list.description"),emptyState:{empty:{heading:e("stockLocations.list.noRecordsMessage"),description:e("stockLocations.list.noRecordsMessageEmpty")},filtered:{heading:e("stockLocations.list.noRecordsMessage"),description:e("stockLocations.list.noRecordsMessageFiltered")}},actions:[{label:e("actions.create"),to:"create"}],isLoading:o,rowHref:d=>`/settings/locations/${d.id}`,enableSearch:!0,prefix:y,layout:"fill"})})}),s.jsx(m.Sidebar,{children:s.jsx(A,{})})]})}var A=()=>{const{t:e}=f();return s.jsxs(j,{className:"p-0",children:[s.jsx("div",{className:"flex items-center justify-between px-6 py-4",children:s.jsx(D,{level:"h2",children:e("stockLocations.sidebar.header")})}),s.jsx(h,{to:"/settings/locations/shipping-profiles",labelKey:e("stockLocations.sidebar.shippingProfiles.label"),descriptionKey:e("stockLocations.sidebar.shippingProfiles.description"),icon:s.jsx(S,{})}),s.jsx(h,{to:"/settings/locations/shipping-option-types",labelKey:e("stockLocations.sidebar.shippingOptionTypes.label"),descriptionKey:e("stockLocations.sidebar.shippingOptionTypes.description"),icon:s.jsx(H,{})})]})};export{ye as Component};
