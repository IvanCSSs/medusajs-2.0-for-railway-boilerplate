import{u as f}from"./chunk-3TZOFKX2-M15LmCS4.js";import{f as g}from"./chunk-IR5DHEKS-aVJcUHa1.js";import{C as j}from"./chunk-OFN7DIZA-C5u54b_Q.js";import{u as h,a as v,cZ as y,j as e,H as b,c as R,d3 as C,t as m,F as n,B as u,e as T,O as F,o as P,s as _}from"./index-S35l5lon.js";import{K as N}from"./chunk-6HTZNHPT-USxWRfar.js";import{a as s,u as S}from"./chunk-AERWK3TJ-Gph8MRZF.js";import"./combobox-provider-CcO6EPfN.js";import"./triangles-mini-CX2619vl.js";import"./plus-mini-B5zW_eay.js";import"./focus-modal-B7NOABos.js";import"./prompt-YaiseBxh.js";var E=P({provider_id:_().min(1)}),w=({taxRegion:i})=>{const{t:o}=h(),{handleSuccess:d}=S(),a=f({queryKey:["tax_providers"],queryFn:r=>F.admin.taxProvider.list(r),getOptions:r=>r.tax_providers.map(l=>({label:g(l.id),value:l.id}))}),t=R({defaultValues:{provider_id:i.provider_id},resolver:T(E)}),{mutateAsync:c,isPending:x}=C(i.id),p=t.handleSubmit(async r=>{await c({provider_id:r.provider_id},{onSuccess:()=>{m.success(o("taxRegions.edit.successToast")),d()},onError:l=>{m.error(l.message)}})});return e.jsx(s.Form,{form:t,children:e.jsxs(N,{className:"flex flex-1 flex-col overflow-hidden",onSubmit:p,children:[e.jsx(s.Body,{className:"flex flex-1 flex-col gap-y-6 overflow-auto",children:e.jsx("div",{className:"flex flex-col gap-y-4",children:e.jsx(n.Field,{control:t.control,name:"provider_id",render:({field:r})=>e.jsxs(n.Item,{children:[e.jsx(n.Label,{children:o("taxRegions.fields.taxProvider")}),e.jsx(n.Control,{children:e.jsx(j,{...r,options:a.options,searchValue:a.searchValue,onSearchValueChange:a.onSearchValueChange,fetchNextPage:a.fetchNextPage})}),e.jsx(n.ErrorMessage,{})]})})})}),e.jsx(s.Footer,{className:"shrink-0",children:e.jsxs("div",{className:"flex items-center justify-end gap-x-2",children:[e.jsx(s.Close,{asChild:!0,children:e.jsx(u,{size:"small",variant:"secondary",children:o("actions.cancel")})}),e.jsx(u,{size:"small",type:"submit",isLoading:x,children:o("actions.save")})]})})]})})},A=()=>{const{t:i}=h(),{id:o}=v(),{tax_region:d,isPending:a,isError:t,error:c}=y(o),x=!a&&!!d;if(t)throw c;return e.jsxs(s,{children:[e.jsxs(s.Header,{children:[e.jsx(s.Title,{asChild:!0,children:e.jsx(b,{children:i("taxRegions.edit.header")})}),e.jsx(s.Description,{className:"sr-only",children:i("taxRegions.edit.hint")})]}),x&&e.jsx(w,{taxRegion:d})]})};export{A as Component};
