import{u as k,a as T,b as E}from"./chunk-NOAFLTPV-oIicrk9h.js";import{a as A,bM as F,j as o,u as I,r as g,c as z,bH as B,bP as H,t as x,B as b,e as M,o as D,l as K,s as L}from"./index-S35l5lon.js";import{u as N,_ as O}from"./chunk-ULVVVKLF-DQ5i1kAh.js";import"./chunk-GU5PJRPM-CRBxyP7n.js";import{K as V}from"./chunk-6HTZNHPT-USxWRfar.js";import{R as n,u as q}from"./chunk-AERWK3TJ-Gph8MRZF.js";import{c as G}from"./index-D8hIMFbh.js";import{C as S}from"./checkbox-Bm9_gGRM.js";import"./chunk-C76H5USB-C4gmMgZH.js";import"./chunk-HQKGZADC-CFjwmGLF.js";import"./table-u7knMi01.js";import"./chunk-EMIHDNB7-1UnYIHIF.js";import"./plus-mini-B5zW_eay.js";import"./command-bar-D5PjKtE8.js";import"./index-BqPH3RWs.js";import"./chunk-DZWH2RV6-B7cI8-p8.js";import"./sub-Ca2BFeSf.js";import"./format-BsAuNKh5.js";import"./index-haGLTuDn.js";import"./date-picker-CzxuXAvc.js";import"./popover-9ZHd-JXE.js";import"./triangle-left-mini-CmFFwE40.js";import"./focus-modal-B7NOABos.js";import"./prompt-YaiseBxh.js";var Q=D({countries:K(L()).min(1)}),m=50,p="ac",U=({region:r})=>{const{t:e}=I(),{handleSuccess:a}=q(),[t,l]=g.useState({}),u=z({defaultValues:{countries:[]},resolver:M(Q)}),{setValue:h}=u;g.useEffect(()=>{const s=Object.keys(t).filter(i=>t[i]);h("countries",s,{shouldDirty:!0,shouldTouch:!0})},[t,h]);const{searchParams:C,raw:_}=k({pageSize:m,prefix:p}),{countries:j,count:f}=T({countries:B.map((s,i)=>({display_name:s.display_name,name:s.name,id:i,iso_2:s.iso_2,iso_3:s.iso_3,num_code:s.num_code,region_id:null,region:{}})),...C}),y=Z(),{table:R}=N({data:j||[],columns:y,count:f,enablePagination:!0,enableRowSelection:s=>{var i;return((i=r.countries)==null?void 0:i.findIndex(c=>c.iso_2===s.original.iso_2))===-1},getRowId:s=>s.iso_2,pageSize:m,rowSelection:{state:t,updater:l},prefix:p}),{mutateAsync:P,isPending:v}=H(r.id),w=u.handleSubmit(async s=>{var c;const i=[...((c=r.countries)==null?void 0:c.map(d=>d.iso_2))??[],...s.countries];await P({countries:i},{onSuccess:()=>{x.success(e("regions.toast.countries")),a()},onError:d=>{x.error(d.message)}})});return o.jsx(n.Form,{form:u,children:o.jsxs(V,{onSubmit:w,className:"flex h-full flex-col overflow-hidden",children:[o.jsx(n.Header,{}),o.jsx(n.Body,{className:"overflow-hidden",children:o.jsx(O,{table:R,columns:y,pageSize:m,count:f,search:"autofocus",pagination:!0,layout:"fill",orderBy:[{key:"display_name",label:e("fields.name")},{key:"iso_2",label:e("fields.code")}],queryObject:_,prefix:p})}),o.jsxs(n.Footer,{children:[o.jsx(n.Close,{asChild:!0,children:o.jsx(b,{size:"small",variant:"secondary",children:e("actions.cancel")})}),o.jsx(b,{size:"small",isLoading:v,type:"submit",children:e("actions.add")})]})]})})},X=G(),Z=()=>{const r=E();return g.useMemo(()=>[X.display({id:"select",header:({table:e})=>o.jsx(S,{checked:e.getIsSomePageRowsSelected()?"indeterminate":e.getIsAllPageRowsSelected(),onCheckedChange:a=>e.toggleAllPageRowsSelected(!!a)}),cell:({row:e})=>{const a=!e.getCanSelect();return o.jsx(S,{checked:e.getIsSelected()||a,disabled:a,onCheckedChange:t=>e.toggleSelected(!!t),onClick:t=>{t.stopPropagation()}})}}),...r],[r])},Se=()=>{const{id:r}=A(),{region:e,isPending:a,isError:t,error:l}=F(r,{fields:"*payment_providers"});if(t)throw l;return o.jsx(n,{children:!a&&e&&o.jsx(U,{region:e})})};export{Se as Component};
